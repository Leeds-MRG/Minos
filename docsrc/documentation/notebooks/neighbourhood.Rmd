---
title: "Neighbourhood"
output: html_document
bibliography: 
  - "`r here::here('docsrc', 'refs.bib')`"

---

```{r setup, include=FALSE}
library(here)
library(glmnet)
library(plyr)

source(here::here("docsrc", "documentation", "notebooks", "sphinx_notebook_utils.R"))
model_path <- here::here("data", "transitions", "neighbourhood_safety", "rfo", "neighbourhood_safety_RFO.rds")
model <- readRDS(model_path)

data <- read.csv(here::here("data", "final_US", "2020_US_cohort.csv"))
obs <- data$neighbourhood_safety
data$neighbourhood_safety_last <- data$neighbourhood_safety

preds <- ranger::predictions(stats::predict(model, data))
column_names <- colnames(preds)
preds <-glmnet::rmult(preds)
preds <- plyr::mapvalues(preds, from=c(1,2,3), to= column_names)
v <- " neighbourhood_safety"

```

## Neighbourhood


Neighbourhood quality is an indicator of well-being suggested by the SIPHER-7 XXXX ref and others?. 


### Methods
  
```{r neighbourhood_barchart, echo=FALSE}
discrete_barplot(obs, 'neighbourhood_safety')
```

  Neighbourhood data are presented as a likert scale from 1-6 indicating the number of harmful activities that happen in a persons
  neighbourhood for individual health. These include robberies and vandalism with the full encoding available in the data tables.
  
### Data
  
  What variables are included? Why is this output chosen. What explanatory variables are used and why are they chosen
  
### Results
  
  What are the results. Coefficients tables. diagnostic plots. measures of goodness of fit.


```{r housing_output, echo=FALSE}
options(width=120)
discrete_barplot2(obs, preds, "neighbourhood_safety") 
rfo_output(model)
```


### References