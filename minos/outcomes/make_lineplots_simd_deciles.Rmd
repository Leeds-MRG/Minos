---
title: "make_lineplots_simd_deciles"
author: "RC"
date: "2023-07-12"
output: html_document
---
---
title: "R MINOS Lineplot Notebooks"
output: html_document
date: "2023-05-20"
---

# MINOS Lineplot Outputs

IMPORTANT NOTE TO RUN THIS NOTEBOOK YOU NEED TO INSTALL THE MINOS_CONDA conda environment for MINOS. 
Can just use minos_conda or create a miniconda env using reticulate package. 

```{r setup, include=FALSE}
require(reticulate) #Â for python in Rmd. 
require(knitr)
require(here)

knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = here::here())
reticulate::use_condaenv("minos_conda", required = TRUE)
#knitr::knit_engines$set(python = reticulate::eng_python)
#reticulate::py_config()

```

# Baseline vs All Child Uplift


```{python simd deciles, fig.path="plots/"}
# packages need installing in R using py_install("package"). honestly this seems not worth it..
from minos.outcomes.make_lineplots import main as lineplot_main
# define test parameters and run.
directories = "baseline,baseline,baseline,baseline,baseline,baseline,baseline,baseline,baseline,baseline,baseline,baseline"
tags = "National Average,First,Second,Third,Fourth,Fifth,Sixth,Seventh,Eighth,Ninth,Tenth"
subset_function_strings = "who_alive,who_first_decile,who_second_decile,who_third_decile,who_fourth_decile,who_fifth_decile,who_sixth_decile,who_seventh_decile,who_eigth_decile,who_ninth_decile,who_tenth_decile"
prefix="simd_deciles"
config_mode = "glasgow_scaled"
lineplot_main(directories, tags, subset_function_strings, prefix, mode=config_mode, ref="National Average", v="SF_12", method='nanmean')
```

```{r out.height = "600px", out.width='800px', include=TRUE, fig.align="center", fig.cap=c("your caption"), echo=FALSE}
knitr::include_graphics(here::here("plots", "baseline_all_child_uplift_SF_12_aggs_by_year.pdf"), error=FALSE)
```
